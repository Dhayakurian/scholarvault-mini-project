<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Login - ScholarVault</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/feather-icons"></script>
  <link rel="stylesheet" href="styles.css">
  <style>
:root {
            --primary: #4e5679;
            --primary-light: #7685af;
            --primary-dark: #21253a;
            --secondary: #f5f7fa;
            --secondary-dark: #ebeef3;
            --text-primary: #21253a;
            --text-secondary: #616c98;
            --text-muted: #94a3c3;
            --border-color: #ebeef3;
            --white: #ffffff;
            --radius: 0.5rem;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --info: #3b82f6;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
body {
    background-color: var(--white); /* Page background changed to white */
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
}

.login-section {
    min-height: auto; /* Removes unnecessary extra height */
    background-color: var(--white); /* Matches the new white background */
}
    
    .login-pattern {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: radial-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px);
      background-size: 20px 20px;
      opacity: 0.5;
      z-index: 1;
    }
    .login-card {
    width: 100%;
    max-width: 450px;
    background-color: var(--white);
    border-radius: var(--radius);
    box-shadow: var(--shadow-xl);
    padding: 2.5rem 2rem;
    position: relative;
    z-index: 2;
    box-sizing: border-box; /* Add this line */
}

    .login-shape {
      position: absolute;
      bottom: -80px;
      left: -80px;
      width: 200px;
      height: 200px;
      background-color: rgba(118, 133, 175, 0.1);
      border-radius: 50%;
      z-index: 0;
    }

    .login-header {
      margin-bottom: 2rem;
      position: relative;
      z-index: 1;
      text-align: center;
    }

    .login-title {
      color: var(--primary-dark);
      margin-bottom: 0.5rem;
    }

    .login-form {
      position: relative;
      z-index: 1;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: var(--primary-dark);
    }

    .form-input {
    width: 100%;
    padding: 0.75rem 1rem;
    border-radius: var(--radius);
    border: 1px solid var(--border-color);
    font-family: 'Raleway', sans-serif;
    font-size: 1rem;
    transition: border-color 0.3s, box-shadow 0.3s;
    box-sizing: border-box; /* Add this line */
}

    .form-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(78, 86, 121, 0.2);
    }

    .input-icon-wrapper {
      position: relative;
    }

    .input-icon {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      left: 1rem;
      color: var(--text-muted);
    }

    .input-with-icon {
      padding-left: 2.75rem;
    }

    .login-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.75rem 1.5rem;
    font-size: 1rem;
    font-weight: 600;
    color: var(--white);
    background-color: var(--primary-dark);
    border: none;
    border-radius: var(--radius);
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease;
    width: 100%; /* Makes it full-width */
    text-align: center;
}

.login-button:hover {
    background-color: var(--primary-light);
    transform: translateY(-2px);
}

    .security-note {
      margin-top: 2rem;
      padding: 1rem;
      background-color: rgba(78, 86, 121, 0.1);
      border-radius: var(--radius);
      font-size: 0.875rem;
      color: var(--text-secondary);
      display: flex;
      align-items: center;
    }

    .security-icon {
      color: var(--primary);
      margin-right: 0.75rem;
      flex-shrink: 0;
    }

   
 /* Updated Navbar Styles */
    .admin-navbar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background-color: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(5px);
      z-index: 1000;
      box-shadow: var(--shadow-sm);
      padding: 1rem 0;
    }

    .admin-navbar-content {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .admin-logo {
      font-family: 'Playfair Display', serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary-dark);
      display: flex;
      align-items: center;
      text-decoration: none; /* Removes underline */
    }

    .admin-logo-icon {
      margin-right: 8px;
      color: var(--primary);
    }


    @media (max-width: 480px) {
      .login-card {
        padding: 2rem 1.5rem;
      }
    }
  </style>
</head>
<body>
  <!-- Added Navbar -->
  <header class="admin-navbar">
    <div class="container">
      <div class="admin-navbar-content">
        <a href="landinglovee.html" class="admin-logo">
          <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="admin-logo-icon">
            <path d="M22 10v6M2 10l10-5 10 5-10 5z"></path>
            <path d="M6 12v5c0 2 2 3 6 3s6-1 6-3v-5"></path>
          </svg>
          ScholarVault
        </a>
      </div>
    </div>
  </header>

  <!-- Login Section -->
  <section class="login-section fade-in">
    <div class="login-pattern"></div>
    <div class="container">
      <div class="login-card scale-in">
        <div class="login-shape"></div>
        <div class="login-header">
          <h1 class="login-title">Admin Portal</h1>
        </div>
        <form class="login-form" id="adminLoginForm">
          <div class="form-group">
            <label for="username" class="form-label">Admin Username</label>
            <div class="input-icon-wrapper">
              <i data-feather="user" class="input-icon"></i>
              <input type="text" id="username" name="username" class="form-input input-with-icon" placeholder="Enter admin username" required>
            </div>
          </div>
          <div class="form-group">
            <label for="password" class="form-label">Admin Password</label>
            <div class="input-icon-wrapper">
              <i data-feather="lock" class="input-icon"></i>
              <input type="password" id="password" name="password" class="form-input input-with-icon" placeholder="Enter admin password" required>
            </div>
          </div>
          <button type="submit" class="btn btn-primary btn-large login-button">
            Login
          </button>
        </form>
        <div class="security-note">
          <i data-feather="alert-circle" class="security-icon"></i>
          <p>This area is restricted to authorized personnel only. All login attempts are recorded and monitored.</p>
        </div>
      </div>
    </div>
  </section>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize Feather icons
      feather.replace();
      
      // Admin login form handling
      const adminLoginForm = document.getElementById('adminLoginForm');
      const errorMessageDiv = document.createElement('div'); // Create error message div dynamically
      errorMessageDiv.id = 'error-message';
      errorMessageDiv.className = 'error-message';
      errorMessageDiv.style.display = 'none';
      document.querySelector('.login-card').appendChild(errorMessageDiv); // Append to login card
  
      if (adminLoginForm) {
        adminLoginForm.addEventListener('submit', async function(e) {
          e.preventDefault();
          
          // Get form values
          const username = document.getElementById('username').value;
          const password = document.getElementById('password').value;
          
          // Validate (simple client-side check)
          if (username.trim() === '' || password.trim() === '') {
            showError('Please fill in all fields');
            return;
          }
          
          // Show loading state
          const submitBtn = this.querySelector('button[type="submit"]');
          submitBtn.innerHTML = '<div class="pulse">Authenticating...</div>';
          submitBtn.disabled = true;
          
          try {
            // Send login request to backend
            const response = await fetch('http://localhost:5000/admin/login', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                username: username,
                password: password
              })
            });
  
            const data = await response.json();
  
            if (data.status === 'success') {
              // Store the token in localStorage
              localStorage.setItem('authToken', data.data.token);
              localStorage.setItem('adminId', data.data.admin_id);
              localStorage.setItem('username', data.data.username);
  
              // Redirect to admin dashboard
              window.location.href = 'adminlov.html';
            } else {
              // Show error message
              showError(data.message);
              submitBtn.innerHTML = 'Login';
              submitBtn.disabled = false;
            }
          } catch (error) {
            console.error('Error during admin login:', error);
            showError('Failed to connect to the server. Please try again later.');
            submitBtn.innerHTML = 'Login';
            submitBtn.disabled = false;
          }
        });
      }
  
      // Function to show error messages
      function showError(message) {
        errorMessageDiv.textContent = message;
        errorMessageDiv.style.display = 'block';
        setTimeout(() => {
          errorMessageDiv.style.display = 'none';
        }, 5000); // Hide after 5 seconds
      }
    });
  </script>
</body>
</html>
